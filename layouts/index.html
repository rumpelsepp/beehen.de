{{ define "main" }}

<main class="index">
	<div class="article-list">
		{{ range (where .Site.RegularPages "Section" "blog") }}
		<article>
			<header>
				{{ $img := "" }}

				{{- $images := .Page.Resources.ByType "image" -}}
				{{- $featured := $images.GetMatch "*feature*" -}}
				{{- if not $featured }}{{ $featured = $images.GetMatch "{*cover*,*thumbnail*}" }}{{ end -}}
				{{- with $featured -}}
				{{ $img = $featured.Fit "300x150" }}
				{{- end -}}

				{{ if not (eq $img "") }}
				<div class="container flex flex-wrap">
					<aside class="row twenty post_image"><img src="{{ $img.Permalink }}"></aside>
					<div class="row eighty">
						<time datetime="{{.Date}}">{{.Date.Format "02.01.2006"}}</time><a href="{{ .Permalink }}">{{ if .Draft }}DRAFT · {{ end }}{{.Title}}</a>

						{{ partial "tags-div.html" . }}
					</div>
				</div>
				{{ else }}
				<time datetime="{{.Date}}">{{.Date.Format "02.01.2006"}}</time><a href="{{.Permalink}}">{{ if .Draft }}DRAFT · {{ end }}{{.Title}}</a>
				{{ partial "tags-div.html" . }}
				{{ end }}
			</header>
			<p>{{ .Summary }} {{ if .Truncated }}<a href="{{.Permalink}}">[…]</a>{{ end }}</p>
			<footer>
				<a href="{{.Permalink}}">zum Artikel</a>
			</footer>
		</article>
		{{ end }}
	</div>
</main>
{{ end }}